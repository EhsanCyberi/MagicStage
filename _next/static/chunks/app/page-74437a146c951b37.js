(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8404:(e,t,s)=>{Promise.resolve().then(s.bind(s,7676)),Promise.resolve().then(s.t.bind(s,9195,23))},7676:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(5155),l=s(2115);let i="game_stage",r="game_inventory";function c(){let[e,t]=(0,l.useState)([]),[s,c]=(0,l.useState)(1),[n,o]=(0,l.useState)([]),[d,m]=(0,l.useState)(null),[h,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/history.json");if(!e.ok)throw Error("Failed to load history.json");let s=await e.json();t(s);let a=localStorage.getItem(i),l=localStorage.getItem(r);a&&c(Number(a)),l&&o(JSON.parse(l)),u(!0)}catch(e){console.error(e)}})()},[]),(0,l.useEffect)(()=>{h&&(localStorage.setItem(i,s),localStorage.setItem(r,JSON.stringify(n)))},[s,n,h]);let g=()=>{c(1),o([]),localStorage.removeItem(i),localStorage.removeItem(r)},v=e=>{if(m(null),e.isDeath){alert(e.deathMessage||"You died."),g();return}if(e.requiredItem&&!n.includes(e.requiredItem)){e.fallbackStage?c(e.fallbackStage):e.feedback&&m(e.feedback);return}e.givesItem&&!n.includes(e.givesItem)&&o(t=>[...t,e.givesItem]),c(e.nextStage)};if(!h)return(0,a.jsx)("div",{className:"loading",children:"درحال بارگذاری..."});let f=e.find(e=>e.id===s);return f?(0,a.jsxs)("div",{className:"gameContainer",children:["        ",(0,a.jsxs)("div",{className:"gameCard",children:["            ",(0,a.jsxs)("h2",{className:"stageTitle",children:["صحنه ",f.id]}),"    ",(0,a.jsx)("p",{className:"stageText",children:f.text}),"           ",d&&(0,a.jsx)("p",{className:"feedbackMessage",children:d}),(0,a.jsxs)("div",{className:"choicesContainer",children:["                  ",f.choices.map((e,t)=>(0,a.jsx)("button",{onClick:()=>v(e),className:"choiceButton",children:e.text},t))]}),(0,a.jsx)("hr",{className:"divider"}),"                           ",(0,a.jsxs)("div",{className:"inventorySection",children:["                   ",(0,a.jsx)("div",{className:"inventoryTitle",children:"دارایی"}),"    ",0===n.length?(0,a.jsx)("p",{className:"inventoryEmpty",children:"خالی"}):(0,a.jsxs)("ul",{className:"inventoryList",children:["                   ",n.map(e=>(0,a.jsxs)("li",{className:"inventoryItem",children:["    ",e]},e))]})]})]})]}):(0,a.jsx)("div",{children:"صحنه یافت نشد"})}},9195:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[450,441,517,358],()=>t(8404)),_N_E=e.O()}]);